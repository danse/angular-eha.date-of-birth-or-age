angular.module("eha.date-of-birth-or-age.template",["templates/date-of-birth-or-age.directive.tpl.html"]),angular.module("templates/date-of-birth-or-age.directive.tpl.html",[]).run(["$templateCache",function(a){a.put("templates/date-of-birth-or-age.directive.tpl.html",'<div class="component date-of-birth-or-age">\n  <label class="block" translate>Date of birth:</label>\n<!-- Whitespace between elements is significant, please don\'t reformat the next 3 divs -->\n<div class="form-group birthday">\n    <label translate>Day</label><br/>\n    <select class="form-control"\n            ng-model="model.birthDay"\n            ng-options="(days.indexOf(day) + 1) as day for day in days"\n            tab-to-next-input-on-enter\n            >\n    </select>\n</div><div class="form-group month">\n    <label translate>Month</label><br/>\n    <select class="form-control"\n            ng-model="model.birthMonth"\n            ng-options="(months.indexOf(month) + 1) as month for month in months"\n            tab-to-next-input-on-enter >\n    </select>\n</div><div class="form-group year">\n    <label translate>Year</label><br/>\n    <select class="form-control"\n            ng-model="model.birthYear"\n            ng-options="year as year for year in years"\n            tab-to-next-input-on-enter >\n    </select>\n</div>\n<label class="block" translate>Age:</label>\n<div class="form-group age-years">\n    <label translate>Years</label><br/>\n    <input type="number" min="0" max="120" step="1" class="form-control center-text" name="ageYears"\n            ng-model="model.age.years"\n            select-on-focus\n            tab-to-next-input-on-enter\n            />\n<!-- Whitespace is significant, please don\'t reformat the next line -->\n</div><span class="backslash">/</span><div class="form-group age-months">\n    <label translate>Months</label><br/>\n    <input type="number" min="0" max="11" step="1" class="form-control center-text" name="ageMonths"\n      ng-model="model.age.months"\n      select-on-focus\n      tab-to-next-input-on-enter />\n</div>\n</div>\n')}]),function(){"use strict";var a=angular.module("eha.date-of-birth-or-age.directive",[]);a.directive("ehaDateOfBirthOrAge",["ehaDateOfBirthOrAgeService",function(a){return{templateUrl:"templates/date-of-birth-or-age.directive.tpl.html",scope:{model:"=model"},link:function(b){b.days=a.getDays(),b.months=a.getMonths(),b.years=a.getYears(),b.$watchCollection("[model.birthDay, model.birthMonth, model.birthYear]",function(c,d){angular.equals(c,d)||"number"==typeof c[1]&&"number"==typeof c[2]&&(b.model.age=a.getAgeFromBirthDate(b.birthYear,b.birthMonth),console.log(b.model.age))}),b.$watchCollection("[model.age.years, model.age.months]",function(c,d){if(console.log(c,d),!angular.equals(c,d)&&("number"==typeof c[0]||"number"==typeof c[1])){var e=a.getBirthDateFromAge(b.model.age.years,b.model.age.months);b.model.birthYear=e.year,b.model.birthMonth=e.month,console.log(e)}})}}}]),"undefined"!=typeof module&&module.exports&&(module.exports=a)}(),function(){"use strict";var a=angular.module("eha.date-of-birth-or-age.service",[]);a.value("moment",window&&window.moment||{}),a.service("ehaDateOfBirthOrAgeService",["$locale","moment",function(a,b){for(var c=b().format("M"),d=b().format("YYYY"),e=b().subtract(1,"month"),f=a.DATETIME_FORMATS.MONTH,g=[],h=1;31>=h;h++)g.push(h);for(var i=[],j=d;j>=1920;j--)i.push(j);this.getMonths=function(){return f},this.getDays=function(){return g},this.getYears=function(){return i},this.getBirthDateFromAge=function(a,c){c=c||0,a=a||0;var d=b().subtract(c,"months").subtract(a,"years");return{year:d.years(),month:d.months()}},this.getAgeFromBirthDate=function(a,f){var g=a||d,h=f||c;if(!(g>d||g===d&&h>c)){var i=b([g,h-1]).unix(),j=e.unix(),k=b.duration(j-i,"seconds");return{years:k.years(),months:k.months()}}}}]),"undefined"!=typeof module&&module.exports&&(module.exports=a)}(),function(){var a=angular.module("eha.date-of-birth-or-age",["eha.date-of-birth-or-age.directive","eha.date-of-birth-or-age.service","eha.date-of-birth-or-age.template"]);"undefined"!=typeof module&&module.exports&&(module.exports=a)}();